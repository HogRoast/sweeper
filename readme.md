# Footy prediction algorithm.

## Overview
This software consists of a number of python modules that can be used to analyse historic football results and betting history and predict key futures matches to bet on.

## Usage
Currently the files described in the Source Modules section below can be run interactively as individual python scripts, eventually the aim is to cover them with a REST API and be able to call them from a HTML client.
 
## Requirements
Python 3.7+

## Database - database direcory
The following SQLite3 database file is the template for the real footy.db database file that will be used by the production system. There is an included schema.jpg which describes the database layout and constraints. 

```
footy.test.db
```

The Footy application interacts with the database via generated database objects used in conjuction with an instance of the Database class. The Database class uses an aggregated impl object to abstract the actual database away and currently SQLite3 is the only provided implementation.

## Config Files - config directory
The following config file is a template for the footy.ini file that is required by the AnalyseFixtures module to email results to interested parties, it contains mail addresses and algo config parameters.

```
example.footy.ini
```

Modify the mail parameters to specify an appropriate mail sever and distribution list and save the result as 'footy.ini' under the config directory. Modify the algo parameters to specify which leagues you wish to run the algos over and what marks to use for prediction, also allows for configuration of the number of seasons to be included in analysis.

## Source Modules - src directory
### MakeFootyHistory 
Downloads latest football historical data from [Football-Data](www.football-data.co.uk). This script runs the historical analysis and generates the summary statistics for each league in the rangeMap specified in thse ini file (see later). This must be run before running AnalyseFixtures or FootyBackTest.

### AnalyseFixtures 
Downloads the latest fixture list from [Football-Data](www.football-data.co.uk) it uses the same historical data generated by MakeFootyHistory and creates predictions based on the selected 'model'. Output is placed in the 'analysisDir'. Running with -s option will send an email of the predictions to the addresses specified in file named footy.ini (not included in repo, however you will find example.footy.ini from which can be used as a template).

### FootyBacktest
Can be used to run backtest of the selected model over the historical data specified in the rangeMap (see .ini).

### FootyAnalysisTools 
Defines the models and the analysis output directory.

### DownloadData
Can be used to download the raw historical data from [Football-Data](www.football-data.co.uk).

### Logging 
This module defines a simple log functionality that can be switched on and off via command line args.

### database - src/database directory
This module contains the Database class, the SQLite3 implementation class and a gen_db.py application that will generate the required database objects and their associated tests from the create_db.sql schema provided in the ../../database directory. To generate the DB objects simply execute the following...

```
python gen_dbo.py
```

This will create the DB objects in the src/database directory and associated test under the ../../test directory.
